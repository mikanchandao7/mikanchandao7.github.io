<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JUDAS | Works</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">

<style>
:root{
--bg:#050505;
--card-bg:#111;
--primary:#ff2e63;
--text:#fff;
--dim:#888;
}

body{
background:var(--bg);
color:var(--text);
font-family:'Inter',sans-serif;
margin:0;
}

header{
padding:40px 20px;
text-align:center;
background:#000;
}

h1{
margin:0;
font-size:2.5rem;
color:var(--primary);
}

.container{
max-width:1600px;
margin:auto;
padding:40px 5vw;
}

/* top controls */
.top-controls{
display:flex;
flex-wrap:wrap;
justify-content:space-between;
align-items:center;
gap:15px;
margin-bottom:25px;
}

/* filters */
.filters{
display:flex;
flex-wrap:wrap;
gap:10px;
}

.filter-btn{
padding:8px 14px;
background:#222;
border:1px solid #333;
color:#fff;
cursor:pointer;
border-radius:6px;
font-size:.8rem;
}

.filter-btn.active{
background:var(--primary);
color:#000;
border-color:var(--primary);
}

/* sort select */
select{
background:#222;
color:#fff;
border:1px solid #333;
padding:8px 10px;
border-radius:6px;
}

/* grid */
.grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
gap:25px;
}

.card{
background:var(--card-bg);
border-radius:10px;
overflow:hidden;
text-decoration:none;
color:white;
display:block;
transition:.3s;
border:1px solid #222;
}

.card:hover{
transform:translateY(-5px);
border-color:var(--primary);
}

.card img{
width:100%;
aspect-ratio:16/9;
object-fit:cover;
}

.card-content{
padding:15px;
}

.card-category{
font-size:.7rem;
color:var(--primary);
margin-bottom:6px;
}

.card-title{
font-size:1rem;
margin:0;
}

/* pagination */
.pagination{
margin-top:40px;
display:flex;
justify-content:center;
flex-wrap:wrap;
gap:8px;
}

.page-btn{
padding:6px 12px;
background:#222;
border:1px solid #333;
color:#fff;
cursor:pointer;
border-radius:6px;
font-size:.8rem;
}

.page-btn.active{
background:var(--primary);
color:#000;
border-color:var(--primary);
}

.page-btn:disabled{
opacity:.4;
cursor:not-allowed;
}

/* load more */
.load-more{
margin-top:40px;
text-align:center;
display:none;
}
</style>
</head>

<body>

<header>
<h1>JUDAS</h1>
</header>

<div class="container">

<div class="top-controls">
<div class="filters" id="filterContainer"></div>

<div>
<select id="sortSelect">
<option value="new">新着順</option>
<option value="old">旧着順</option>
</select>

<label style="margin-left:15px;font-size:.8rem;">
<input type="checkbox" id="infiniteToggle">
 無限スクロール
</label>
</div>
</div>

<div class="grid" id="productGrid"></div>

<div class="pagination" id="pagination"></div>

<div class="load-more">
<button class="page-btn" id="loadMoreBtn">もっと見る</button>
</div>

</div>

<script>
document.addEventListener("DOMContentLoaded",function(){

const myID="TkRBM016QXhNekk9";
const perPage=20;

let currentPage=1;
let currentCategory="ALL";
let currentSort="new";
let infiniteMode=false;

const products=[
// ここにあなたの全products配列を入れてOK
{ id:"4843234", img:"https://contents-thumbnail2.fc2.com/w128/storage200000.contents.fc2.com/file/407/40692365/1770219106.91.jpg", title:"OBSESSION 01", cat:"Exclusive" },
{ id:"4848656", img:"https://contents-thumbnail2.fc2.com/w128/storage201000.contents.fc2.com/file/407/40684856/1771013627.34.png", title:"PURE LUST", cat:"Fetish" },
{ id:"4845406", img:"https://contents-thumbnail2.fc2.com/w128/storage200000.contents.fc2.com/file/400/39968267/1770655204.56.jpg", title:"IDOL DESCEND", cat:"Premium" },
{ id:"4847871", img:"https://contents-thumbnail2.fc2.com/w128/storage201000.contents.fc2.com/file/385/38454154/1771234946.32.jpg", title:"FIRST TAKE", cat:"F-Cup" }
];

const grid=document.getElementById("productGrid");
const filterContainer=document.getElementById("filterContainer");
const sortSelect=document.getElementById("sortSelect");
const pagination=document.getElementById("pagination");
const infiniteToggle=document.getElementById("infiniteToggle");
const loadMoreBtn=document.getElementById("loadMoreBtn");

/* category build */
const categories=["ALL",...new Set(products.map(p=>p.cat))];

categories.forEach(cat=>{
const btn=document.createElement("button");
btn.textContent=cat;
btn.className="filter-btn";
if(cat==="ALL") btn.classList.add("active");

btn.onclick=()=>{
document.querySelectorAll(".filter-btn").forEach(b=>b.classList.remove("active"));
btn.classList.add("active");
currentCategory=cat;
currentPage=1;
render();
};

filterContainer.appendChild(btn);
});

/* sort change */
sortSelect.onchange=()=>{
currentSort=sortSelect.value;
currentPage=1;
render();
};

/* infinite toggle */
infiniteToggle.onchange=()=>{
infiniteMode=infiniteToggle.checked;
currentPage=1;
render();
};

/* render */
function render(){

let filtered=currentCategory==="ALL"
? [...products]
: products.filter(p=>p.cat===currentCategory);

filtered.sort((a,b)=>{
return currentSort==="new"
? Number(b.id)-Number(a.id)
: Number(a.id)-Number(b.id);
});

grid.innerHTML="";
pagination.innerHTML="";

const totalPages=Math.ceil(filtered.length/perPage);

if(infiniteMode){
renderInfinite(filtered);
return;
}

const start=(currentPage-1)*perPage;
const end=start+perPage;
const pageItems=filtered.slice(start,end);

drawCards(pageItems);

for(let i=1;i<=totalPages;i++){
const btn=document.createElement("button");
btn.textContent=i;
btn.className="page-btn";
if(i===currentPage) btn.classList.add("active");
btn.onclick=()=>{
currentPage=i;
render();
};
pagination.appendChild(btn);
}

}

/* draw cards */
function drawCards(list){
const fragment=document.createDocumentFragment();

list.forEach(p=>{
const img=p.img.includes("w128")
? p.img.replace("w128","w720")
: p.img;

const card=document.createElement("a");
card.className="card";
card.href=`https://adult.contents.fc2.com/article/${p.id}/?i=${myID}`;
card.target="_blank";
card.rel="noopener noreferrer";

card.innerHTML=`
<img src="${img}" loading="lazy"
onerror="this.onerror=null;this.src='https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=600'">
<div class="card-content">
<div class="card-category">${p.cat}</div>
<h3 class="card-title">${p.title}</h3>
</div>
`;

fragment.appendChild(card);
});

grid.appendChild(fragment);
}

/* infinite mode */
function renderInfinite(filtered){

const visible=filtered.slice(0,currentPage*perPage);
drawCards(visible);

if(currentPage*perPage < filtered.length){
loadMoreBtn.parentElement.style.display="block";
}else{
loadMoreBtn.parentElement.style.display="none";
}
}

loadMoreBtn.onclick=()=>{
currentPage++;
render();
};

render();

});
</script>

</body>
</html>
